<!--
# `Fix incorrect fishing line offset with vanilla bobbers on modded rods.`
by **RegularPhoenix** has been merged.
**Pull Request:** <https://github.com/tModLoader/tModLoader/pull/4060>
**Arrives in Preview**: <t:1709254800:f>
**Arrives in Stable**: <t:1711933200:f>
**Runtime Breakage**: ğŸŸ¢ - **None**
**Source-code Breakage**: ğŸŸ¡ğŸ¤– - **Light effort required; Partially covered by tModPorter**

## Short Summary
> - To fix a bug involving Fishing bobber accessories and modded fishing poles (<https://github.com/tModLoader/tModLoader/issues/3906>), the `ModProjectile.ModifyFishingLine` hook has been made obsolete and a `ModItem.ModifyFishingLine` hook has been added to replace it.
> - Basically, the pole item now controls the string position and color instead of the bobber projectile, matching the Terraria behavior.

## Porting Notes
> - Move logic from the bobber projectile's `ModProjectile.ModifyFishingLine` to the rod item's `ModItem.ModifyFishingLine`.
-->

# ä¿®å¤æ¨¡ç»„é’“é±¼ç«¿ä¸Šé±¼çº¿ä¸åŸç‰ˆæµ®æ¼‚ä¹‹é—´çš„é”™ä½
by **RegularPhoenix**  
**Pull Request**ï¼š<https://github.com/tModLoader/tModLoader/pull/4060>  
**æ›´æ–°è‡³é¢„è§ˆç‰ˆ**ï¼š2024-03-01 09:00  
**æ›´æ–°è‡³ç¨³å®šç‰ˆ**ï¼š2024-04-01 09:00  
**è¿è¡Œæ—¶ç ´åæ€§**ï¼šğŸŸ¢ - **æ— **  
**ä»£ç ç ´åæ€§**ï¼šğŸŸ¡ğŸ¤– - **è½»å¾®ï¼›éƒ¨åˆ†æ”¹åŠ¨å¯ç”± tModPorter å®Œæˆ**

## ç®€è¦æ€»ç»“
- ä¸ºäº†ä¿®å¤[é¢˜ä¸­çš„æ¼æ´](<https://github.com/tModLoader/tModLoader/issues/3906>)ï¼Œé’©å­ `ModProjectile.ModifyFishingLine` è¢«è®°ä¸ºè¿‡æ—¶ï¼Œä»¥ `ModItem.ModifyFishingLine` æ›¿ä»£ã€‚
- æ€»çš„æ¥è¯´ï¼Œé±¼çº¿çš„ä½ç½®å’Œé¢œè‰²ä¸å†ç”±æµ®æ¼‚å°„å¼¹ï¼Œè€Œæ˜¯ç”±é’“é±¼ç«¿ç‰©å“æ§åˆ¶ï¼Œç¬¦åˆåŸç‰ˆçš„è¡Œä¸ºã€‚

## æç¤º
-  æŠŠæµ®æ¼‚å°„å¼¹ `ModProjectile.ModifyFishingLine` ä¸­æ§åˆ¶é±¼çº¿ä½ç½®å’Œé¢œè‰²çš„ä»£ç ç§»åˆ°é’“é±¼ç«¿ç‰©å“çš„ `ModItem.ModifyFishingLine` é‡Œã€‚

<!--
# ä¿®å¤æ¨¡ç»„é’“é±¼ç«¿ä¸Šé±¼çº¿ä¸åŸç‰ˆæµ®æ¼‚ä¹‹é—´çš„é”™ä½
by RegularPhoenix
Pull Requestï¼šhttps://github.com/tModLoader/tModLoader/pull/4060
æ›´æ–°è‡³é¢„è§ˆç‰ˆï¼š2024-03-01 09:00
æ›´æ–°è‡³ç¨³å®šç‰ˆï¼š2024-04-01 09:00
è¿è¡Œæ—¶ç ´åæ€§ï¼šğŸŸ¢ - æ— 
ä»£ç ç ´åæ€§ï¼šğŸŸ¡ğŸ¤– - è½»å¾®ï¼›éƒ¨åˆ†æ”¹åŠ¨å¯ç”± tModPorter å®Œæˆ

## ç®€è¦æ€»ç»“
- ä¸ºäº†ä¿®å¤é¢˜ä¸­çš„æ¼æ´ï¼ˆhttps://github.com/tModLoader/tModLoader/issues/3906ï¼‰ï¼Œé’©å­ ModProjectile.ModifyFishingLine è¢«æ ‡ä¸ºè¿‡æ—¶ï¼Œä»¥ ModItem.ModifyFishingLine æ›¿ä»£ã€‚
- æ€»çš„æ¥è¯´ï¼Œé±¼çº¿çš„ä½ç½®å’Œé¢œè‰²ä¸å†ç”±æµ®æ¼‚å°„å¼¹ï¼Œè€Œæ˜¯ç”±é’“é±¼ç«¿ç‰©å“æ§åˆ¶ï¼Œç¬¦åˆåŸç‰ˆçš„è¡Œä¸ºã€‚

## æç¤º
-  æŠŠæµ®æ¼‚å°„å¼¹ ModProjectile.ModifyFishingLine ä¸­æ§åˆ¶é±¼çº¿ä½ç½®å’Œé¢œè‰²çš„ä»£ç ç§»åˆ°é’“é±¼ç«¿ç‰©å“çš„ ModItem.ModifyFishingLine é‡Œã€‚
-->

---

<!--
# `Separate DisplayName and DisplayNameClean`
by **jopojelly** has been merged.
**Pull Request:** <https://github.com/tModLoader/tModLoader/pull/4052>
**Arrives in Preview**: <t:1709254800:f>
**Arrives in Stable**: <t:1711933200:f>
**Runtime Breakage**: ğŸŸ¢ - **None**
**Source-code Breakage**: ğŸŸ¢ - **None**

## Short Summary
> - `Mod.DisplayNameClean` property added. Use this when outputting the display names of mods to logs or console window. Also use it if your mod has the ability to search or filter by mod display name, such as a search bar.

## Porting Notes
> - Change `Mod.DisplayName` to `Mod.DisplayNameClean` if appropriate.
-->

# æ·»åŠ æ—  tag çš„ `Mod.DisplayName`â€”â€”`Mod.DisplayNameClean`
by **jopojelly**  
**Pull Request**ï¼š<https://github.com/tModLoader/tModLoader/pull/4052>  
**æ›´æ–°è‡³é¢„è§ˆç‰ˆ**ï¼š2024-03-01 09:00  
**æ›´æ–°è‡³ç¨³å®šç‰ˆ**ï¼š2024-04-01 09:00  
**è¿è¡Œæ—¶ç ´åæ€§**ï¼šğŸŸ¢ - **æ— **  
**ä»£ç ç ´åæ€§**ï¼šğŸŸ¢ - **æ— **

## ç®€è¦æ€»ç»“
- æ–°å¢äº†å±æ€§ `Mod.DisplayNameClean`ï¼Œç”¨äºå‘æ—¥å¿—å’Œå‘½ä»¤è¡Œè¾“å‡ºä¸å« [tag](https://terraria.wiki.gg/zh/wiki/%E8%81%8A%E5%A4%A9#Tag) çš„ `DisplayName`ï¼Œä¹Ÿå¯ç”¨äºåç§°æœç´¢/ç­›é€‰åŠŸèƒ½ã€‚

## æç¤º
- é€‚å½“æ—¶ä½¿ç”¨ `Mod.DisplayNameClean`ï¼Œè€Œä¸æ˜¯ `Mod.DisplayName`ã€‚

<!--
# æ·»åŠ æ—  tag çš„ Mod.DisplayNameâ€”â€”Mod.DisplayNameClean
by jopojelly
Pull Requestï¼šhttps://github.com/tModLoader/tModLoader/pull/4052
æ›´æ–°è‡³é¢„è§ˆç‰ˆï¼š2024-03-01 09:00
æ›´æ–°è‡³ç¨³å®šç‰ˆï¼š2024-04-01 09:00
è¿è¡Œæ—¶ç ´åæ€§ï¼šğŸŸ¢ - æ— 
ä»£ç ç ´åæ€§ï¼šğŸŸ¢ - æ— 

## ç®€è¦æ€»ç»“
- æ–°å¢äº†å±æ€§ Mod.DisplayNameCleanï¼Œç”¨äºå‘æ—¥å¿—å’Œå‘½ä»¤è¡Œè¾“å‡ºä¸å« tagï¼ˆhttps://terraria.wiki.gg/zh/wiki/%E8%81%8A%E5%A4%A9#Tagï¼‰çš„ DisplayNameï¼Œä¹Ÿå¯ç”¨äºåç§°æœç´¢/ç­›é€‰åŠŸèƒ½ã€‚

## æç¤º
- é€‚å½“æ—¶ä½¿ç”¨ Mod.DisplayNameCleanï¼Œè€Œä¸æ˜¯ Mod.DisplayNameã€‚
-->

---

<!--
# `A Complete Builder Toggle API`
by **Cyrillya** has been merged.
**Pull Request:** <https://github.com/tModLoader/tModLoader/pull/3943>
**Arrives in Preview**: <t:1709254800:f>
**Arrives in Stable**: <t:1711933200:f>
**Runtime Breakage**: ğŸŸ¢ - **None**
**Source-code Breakage**: ğŸŸ¡ğŸ¤– - **Light effort required; Partially covered by tModPorter**

## Short Summary
> - `BuilderToggle` now has more functionality, such as custom drawing, ordering, and left and right click methods.

## Porting Notes
> - `BuilderToggle.DisplayColorTexture` is now obsolete. Use `BuilderToggle.Draw/DrawHover` instead and modify `drawParams.Color`.-->

# å®Œæ•´çš„å»ºç­‘å·¥å…·å¼€å…³ API
by **Cyrillya**  
**Pull Request**ï¼š<https://github.com/tModLoader/tModLoader/pull/3943>  
**æ›´æ–°è‡³é¢„è§ˆç‰ˆ**ï¼š2024-03-01 09:00  
**æ›´æ–°è‡³ç¨³å®šç‰ˆ**ï¼š2024-04-01 09:00  
**è¿è¡Œæ—¶ç ´åæ€§**ï¼šğŸŸ¢ - **æ— **  
**ä»£ç ç ´åæ€§**ï¼šğŸŸ¡ğŸ¤– - **è½»å¾®ï¼›éƒ¨åˆ†æ”¹åŠ¨å¯ç”± tModPorter å®Œæˆ**

## ç®€è¦æ€»ç»“
- `BuilderToggle`ï¼ˆç‰©å“æ å·¦ä¸Šè§’çš„å°æŒ‰é’®ï¼‰ç°æœ‰æ›´å¤šåŠŸèƒ½ï¼Œæ¯”å¦‚è‡ªå®šä¹‰çš„ç»˜åˆ¶ã€æ’åºå’Œå·¦å³é”®åŠŸèƒ½ã€‚

## æç¤º
- `BuilderToggle.DisplayColorTexture` å·²è¿‡æ—¶ï¼Œç”¨ `BuilderToggle.Draw/DrawHover` è€Œä¸è¦ä¿®æ”¹ `drawParams.Color`ã€‚

<!--
# å®Œæ•´çš„å»ºç­‘å·¥å…·å¼€å…³ API
by Cyrillya
Pull Requestï¼šhttps://github.com/tModLoader/tModLoader/pull/3943
æ›´æ–°è‡³é¢„è§ˆç‰ˆï¼š2024-03-01 09:00
æ›´æ–°è‡³ç¨³å®šç‰ˆï¼š2024-04-01 09:00
è¿è¡Œæ—¶ç ´åæ€§ï¼šğŸŸ¢ - æ— 
ä»£ç ç ´åæ€§ï¼šğŸŸ¡ğŸ¤– - è½»å¾®ï¼›éƒ¨åˆ†æ”¹åŠ¨å¯ç”± tModPorter å®Œæˆ

## ç®€è¦æ€»ç»“
- BuilderToggleï¼ˆç‰©å“æ å·¦ä¸Šè§’çš„å°æŒ‰é’®ï¼‰ç°æœ‰æ›´å¤šåŠŸèƒ½ï¼Œæ¯”å¦‚è‡ªå®šä¹‰çš„ç»˜åˆ¶ã€æ’åºå’Œå·¦å³é”®åŠŸèƒ½ã€‚

## æç¤º
- BuilderToggle.DisplayColorTexture å·²è¿‡æ—¶ï¼Œç”¨ BuilderToggle.Draw/DrawHover è€Œä¸è¦ä¿®æ”¹ drawParams.Colorã€‚
-->

---

<!--
# `Modded Sand and Sandgun support`
by **blahblahbal** has been merged.
**Pull Request:** <https://github.com/tModLoader/tModLoader/pull/4053>
**Arrives in Preview**: <t:1709254800:f>
**Arrives in Stable**: <t:1711933200:f>
**Runtime Breakage**: ğŸŸ¡ - **Unlikely**
**Source-code Breakage**: ğŸŸ¢ - **None**

## Short Summary
> - Sand tiles and associated falling sand and sandgun projectiles are now natively supported.
> - If your mod implemented sand tiles previously they should still work. You can consult ExampleSand to see how it can be done with much cleaner code. Modded sand examples available previously online have slight inconsistencies with bugfixes added in 1.4.4 Terraria, so it might be worth switching to the native approach for exact behavior consistency.

## Porting Notes
> - If you used reflection to access `WorldGen.SpawnFallingBlockProjectile`, it is no longer private and can be called normally.
-->

# æ¨¡ç»„æ²™ä¸å’Œæ²™æª
by **blahblahbal**  
**Pull Request**ï¼š<https://github.com/tModLoader/tModLoader/pull/4053>  
**æ›´æ–°è‡³é¢„è§ˆç‰ˆ**ï¼š2024-03-01 09:00  
**æ›´æ–°è‡³ç¨³å®šç‰ˆ**ï¼š2024-04-01 09:00  
**è¿è¡Œæ—¶ç ´åæ€§**ï¼šğŸŸ¡ - **å¾ˆä½**  
**ä»£ç ç ´åæ€§**ï¼šğŸŸ¢ - **æ— **

## ç®€è¦æ€»ç»“
- tModLoader ç°åŸç”Ÿæ”¯æŒæ¨¡ç»„æ²™å—ã€å…¶è½æ²™å’Œæ²™æªå°„å¼¹ã€‚
- æ­¤å‰æ¨¡ç»„å®ç°çš„æ²™å—åº”ä¾ç„¶æœ‰æ•ˆã€‚æ›´ç®€å•çš„å®ç°å‚è§[ç¤ºä¾‹æ²™å—](<https://github.com/tModLoader/tModLoader/blob/a924e5c689aa2d9c1bc4c44038c66296c131c773/ExampleMod/Content/Tiles/ExampleSand.cs>)ã€‚ä»¥å‰çš„æ¨¡ç»„æ²™å—ç¤ºä¾‹ä¸æ³°æ‹‰ç‘äºš1.4.4ä¸­çš„æ¼æ´ä¿®å¤æœ‰äº›å†²çªï¼Œå»ºè®®æ”¹ç”¨ç°åœ¨ tModLoader æä¾›çš„å®ç°ã€‚

## æç¤º
- å¦‚æœä½ åå°„äº† `WorldGen.SpawnFallingBlockProjectile`ï¼Œæ”¹ä¸ºç›´æ¥è°ƒç”¨ï¼Œå› ä¸ºå®ƒç°åœ¨æ˜¯ `public` çš„äº†ã€‚

<!--
# æ¨¡ç»„æ²™ä¸å’Œæ²™æª
by blahblahbal
Pull Requestï¼šhttps://github.com/tModLoader/tModLoader/pull/4053
æ›´æ–°è‡³é¢„è§ˆç‰ˆï¼š2024-03-01 09:00
æ›´æ–°è‡³ç¨³å®šç‰ˆï¼š2024-04-01 09:00
è¿è¡Œæ—¶ç ´åæ€§ï¼šğŸŸ¡ - å¾ˆä½
ä»£ç ç ´åæ€§ï¼šğŸŸ¢ - æ— 

## ç®€è¦æ€»ç»“
- tModLoader ç°åŸç”Ÿæ”¯æŒæ¨¡ç»„æ²™å—ã€å…¶è½æ²™å’Œæ²™æªå°„å¼¹ã€‚
- æ­¤å‰æ¨¡ç»„å®ç°çš„æ²™å—åº”ä¾ç„¶æœ‰æ•ˆã€‚æ›´ç®€å•çš„å®ç°å‚è§ç¤ºä¾‹æ²™å—ï¼ˆhttps://github.com/tModLoader/tModLoader/blob/a924e5c689aa2d9c1bc4c44038c66296c131c773/ExampleMod/Content/Tiles/ExampleSand.csï¼‰ã€‚ä»¥å‰çš„æ¨¡ç»„æ²™å—ç¤ºä¾‹ä¸æ³°æ‹‰ç‘äºš1.4.4ä¸­çš„æ¼æ´ä¿®å¤æœ‰äº›å†²çªï¼Œå»ºè®®æ”¹ç”¨ç°åœ¨ tModLoader æä¾›çš„å®ç°ã€‚

## æç¤º
- å¦‚æœä½ åå°„äº† WorldGen.SpawnFallingBlockProjectileï¼Œæ”¹ä¸ºç›´æ¥è°ƒç”¨ï¼Œå› ä¸ºå®ƒç°åœ¨æ˜¯ public çš„äº†ã€‚
-->

---

<!--
# `Improve mod version selection and multiplayer mod sync/reload user experience`
by **Chicken Bones** and **jopojelly** has been merged.
**Pull Request:** <https://github.com/tModLoader/tModLoader/pull/3822>
**Arrives in Preview**: <t:1709254800:f>
**Arrives in Stable**: <t:1711933200:f>
**Runtime Breakage**: ğŸŸ¢ - **None**
**Source-code Breakage**: ğŸŸ¢ - **None**

## Short Summary
> - The priority of loading `.tmod` files has been tweaked. 
> - Modders should read the **How does this affect modders?** section of the linked pull request. 
> - Basically, mod version is now more important than tModLoader version. Modders modders will no longer be able to publish a higher version on stable than on preview. 
> - Mod testers with a local copy of a .tmod file will now smoothly transition to the workshop version as it updates to a newer version.
-->

# æ”¹è¿›æ¨¡ç»„ç‰ˆæœ¬é€‰æ‹©å’Œæ¨¡ç»„åŒæ­¥/é‡è½½é€»è¾‘
by **Chicken Bones** å’Œ **jopojelly**  
**Pull Request**ï¼š<https://github.com/tModLoader/tModLoader/pull/3822>  
**æ›´æ–°è‡³é¢„è§ˆç‰ˆ**ï¼š2024-03-01 09:00  
**æ›´æ–°è‡³ç¨³å®šç‰ˆ**ï¼š2024-04-01 09:00  
**è¿è¡Œæ—¶ç ´åæ€§**ï¼šğŸŸ¢ - **æ— **  
**ä»£ç ç ´åæ€§**ï¼šğŸŸ¢ - **æ— **

## ç®€è¦æ€»ç»“
- ä¿®æ”¹äº† `.tmod` æ–‡ä»¶åŠ è½½çš„ä¼˜å…ˆçº§ï¼Œæœ¬åœ°æ¨¡ç»„ï¼ˆå®‰è£…äº `Mods/`ï¼Œåœ¨æ¨¡ç»„åˆ—è¡¨ä¸­å‘ˆç²‰è‰²ï¼‰ç‰ˆæœ¬ä½äºåˆ›æ„å·¥åŠæ¨¡ç»„æ—¶ï¼ŒtModLoader ä¼šåŠ è½½åˆ›æ„å·¥åŠæ¨¡ç»„ã€‚
- å¯¹äºæ¨¡ç»„æµ‹è¯•å‘˜å’Œä¸æœåŠ¡å™¨åŒæ­¥äº†æ¨¡ç»„çš„ç©å®¶æ¥è¯´ï¼Œæœ¬åœ°æ¨¡ç»„ä¸å†è¦†ç›–ç‰ˆæœ¬è¾ƒæ–°çš„åˆ›æ„å·¥åŠæ¨¡ç»„ï¼Œä»¥è‡´æ›´æ–°â€œæ— æ•ˆâ€äº†ã€‚
- ç°åœ¨æ¨¡ç»„ç‰ˆæœ¬æ¯” tModLoader ç‰ˆæœ¬æ›´é‡è¦ã€‚æ¨¡ç»„åˆ¶ä½œè€…æ— æ³•åœ¨ç¨³å®šç‰ˆä¸Šå‘å¸ƒæ¯”é¢„è§ˆç‰ˆä¸Šç‰ˆæœ¬æ›´é«˜çš„æ¨¡ç»„ã€‚
- è¯·æ¨¡ç»„åˆ¶ä½œè€…é˜…è¯»è¯¥ PR ä¸­çš„æè¿° [*How does this affect modders?*](https://github.com/tModLoader/tModLoader/pull/3822#issue-1902437963)

<!--
# æ”¹è¿›æ¨¡ç»„ç‰ˆæœ¬é€‰æ‹©å’Œæ¨¡ç»„åŒæ­¥/é‡è½½é€»è¾‘
by Chicken Bones å’Œ jopojelly
Pull Requestï¼šhttps://github.com/tModLoader/tModLoader/pull/3822
æ›´æ–°è‡³é¢„è§ˆç‰ˆï¼š2024-03-01 09:00
æ›´æ–°è‡³ç¨³å®šç‰ˆï¼š2024-04-01 09:00
è¿è¡Œæ—¶ç ´åæ€§ï¼šğŸŸ¢ - æ— 
ä»£ç ç ´åæ€§ï¼šğŸŸ¢ - æ— 

## ç®€è¦æ€»ç»“
- ä¿®æ”¹äº† .tmod æ–‡ä»¶åŠ è½½çš„ä¼˜å…ˆçº§ï¼Œæœ¬åœ°æ¨¡ç»„ï¼ˆå®‰è£…äº Mods/ï¼Œåœ¨æ¨¡ç»„åˆ—è¡¨ä¸­å‘ˆç²‰è‰²ï¼‰ç‰ˆæœ¬ä½äºåˆ›æ„å·¥åŠæ¨¡ç»„æ—¶ï¼ŒtModLoader ä¼šåŠ è½½åˆ›æ„å·¥åŠæ¨¡ç»„ã€‚
- å¯¹äºæ¨¡ç»„æµ‹è¯•å‘˜å’Œä¸æœåŠ¡å™¨åŒæ­¥äº†æ¨¡ç»„çš„ç©å®¶æ¥è¯´ï¼Œæœ¬åœ°æ¨¡ç»„ä¸å†è¦†ç›–ç‰ˆæœ¬è¾ƒæ–°çš„åˆ›æ„å·¥åŠæ¨¡ç»„ï¼Œä»¥è‡´æ›´æ–°â€œæ— æ•ˆâ€äº†ã€‚
- ç°åœ¨æ¨¡ç»„ç‰ˆæœ¬æ¯” tModLoader ç‰ˆæœ¬æ›´é‡è¦ã€‚æ¨¡ç»„åˆ¶ä½œè€…æ— æ³•åœ¨ç¨³å®šç‰ˆä¸Šå‘å¸ƒæ¯”é¢„è§ˆç‰ˆä¸Šç‰ˆæœ¬æ›´é«˜çš„æ¨¡ç»„ã€‚
- è¯·æ¨¡ç»„åˆ¶ä½œè€…é˜…è¯»è¯¥ PR ä¸­çš„æè¿° *How does this affect modders?*ï¼ˆhttps://github.com/tModLoader/tModLoader/pull/3822#issue-1902437963ï¼‰
-->

---

<!--
# `Do not act upon HJSON files not prefixed with a language code`
by **Mirsario** & **jopojelly** has been merged.
**Pull Request:** <https://github.com/tModLoader/tModLoader/pull/4087>
**Arrives in Preview**: `Available now.`
**Arrives in Stable**: <t:1711933200:f>
**Runtime Breakage**: ğŸŸ¢ - **None**
**Source-code Breakage**: ğŸŸ¢ğŸŸ¡ - **Minuscular**

## Short Summary
> - TML will no longer interfere in cases where mod developers want to utilize `.hjson` files for non-localization needs (such as content and data declarations), as long as the files' extensions are not preceded by language codes (e.g. `en-US`).
> - If you're going to make use of this - it's recommended that you use consistent suffixes in your asset enumeration patterns (e.g. `*.weather.hjson`, `*.data.hjson`, `*.recipe.hjson`), as to not repeat our initial mistake.
## Porting Notes
> `LocalizationLoader.(GetCultureAndPrefixFromPath -> TryGetCultureAndPrefixFromPath)`. Unlikely that anyone used it.
-->

# åŒºåˆ†æœ¬åœ°åŒ–å’Œéæœ¬åœ°åŒ– HJSON æ–‡ä»¶
by **Mirsario** å’Œ **jopojelly**  
**Pull Request**ï¼š<https://github.com/tModLoader/tModLoader/pull/4087>  
**æ›´æ–°è‡³é¢„è§ˆç‰ˆ**ï¼šå·²å®Œæˆ  
**æ›´æ–°è‡³ç¨³å®šç‰ˆ**ï¼š2024-04-01 09:00  
**è¿è¡Œæ—¶ç ´åæ€§**ï¼šğŸŸ¢ - **æ— **  
**ä»£ç ç ´åæ€§**ï¼šğŸŸ¢ğŸŸ¡ - **æå°**

## ç®€è¦æ€»ç»“
- è‹¥ `.hjson` æ–‡ä»¶åä¸­ä¸å«è¯­è¨€ä»£ç ï¼ˆå¦‚ `zh-Hans`)ï¼ŒtModLoader ä¸å†å°†å…¶ä½œä¸ºæœ¬åœ°åŒ–æ–‡ä»¶å¤„ç†ã€‚æ¨¡ç»„åˆ¶ä½œè€…å¯ä»¥æŠŠ `.hjson` æ–‡ä»¶å¦ä½œä»–ç”¨ï¼Œæ¯”å¦‚å£°æ˜å†…å®¹å’Œæ•°æ®ã€‚
- å¦‚æœä½ è¦åˆ©ç”¨è¿™ä¸€åŠŸèƒ½ï¼Œå»ºè®®å®è¡Œç»Ÿä¸€çš„å‘½åè§„åˆ™ï¼Œä¾‹å¦‚ `*.weather.hjson`ã€`*.data.hjson` å’Œ `*.recipe.hjson`ï¼Œè¿™æ ·ä¸å®¹æ˜“å‡ºç°æˆ‘ä»¬ä¹‹å‰çŠ¯çš„é”™è¯¯ã€‚

## æç¤º
- `LocalizationLoader` çš„ `GetCultureAndPrefixFromPath` æ”¹æˆäº† `TryGetCultureAndPrefixFromPath`ã€‚ä¸è¿‡æ²¡äººä¼šç”¨è¿™ä¸ªå§ã€‚

<!--
# åŒºåˆ†æœ¬åœ°åŒ–å’Œéæœ¬åœ°åŒ– HJSON æ–‡ä»¶
by Mirsario å’Œ jopojelly
Pull Requestï¼šhttps://github.com/tModLoader/tModLoader/pull/4087
æ›´æ–°è‡³é¢„è§ˆç‰ˆï¼šå·²å®Œæˆ
æ›´æ–°è‡³ç¨³å®šç‰ˆï¼š2024-04-01 09:00
è¿è¡Œæ—¶ç ´åæ€§ï¼šğŸŸ¢ - æ— 
ä»£ç ç ´åæ€§ï¼šğŸŸ¢ğŸŸ¡ - æå°

## ç®€è¦æ€»ç»“
- è‹¥ .hjson æ–‡ä»¶åä¸­ä¸å«è¯­è¨€ä»£ç ï¼ˆå¦‚ zh-Hans)ï¼ŒtModLoader ä¸å†å°†å…¶ä½œä¸ºæœ¬åœ°åŒ–æ–‡ä»¶å¤„ç†ã€‚æ¨¡ç»„åˆ¶ä½œè€…å¯ä»¥æŠŠ .hjson æ–‡ä»¶å¦ä½œä»–ç”¨ï¼Œæ¯”å¦‚å£°æ˜å†…å®¹å’Œæ•°æ®ã€‚
- å¦‚æœä½ è¦åˆ©ç”¨è¿™ä¸€åŠŸèƒ½ï¼Œå»ºè®®å®è¡Œç»Ÿä¸€çš„å‘½åè§„åˆ™ï¼Œä¾‹å¦‚ *.weather.hjsonã€*.data.hjson å’Œ *.recipe.hjsonï¼Œè¿™æ ·ä¸å®¹æ˜“å‡ºç°æˆ‘ä»¬ä¹‹å‰çŠ¯çš„é”™è¯¯ã€‚

## æç¤º
- LocalizationLoader çš„ GetCultureAndPrefixFromPath æ”¹æˆäº† TryGetCultureAndPrefixFromPathã€‚ä¸è¿‡æœ¬æ¥å°±æ²¡äººç”¨è¿™ä¸ªå§ã€‚
-->

---

<!--
# Two PRs improving the performance and usability of `HookList` and `GlobalHookList`
by **Chicken Bones** have been merged.
**Pull Requests:** <https://github.com/tModLoader/tModLoader/pull/4088> <https://github.com/tModLoader/tModLoader/pull/4089>
**Arrives in Preview**: Available Now
**Arrives in Stable**: <t:1711933200:f>
**Runtime Breakage**: ğŸŸ¡  - **Minor**
**Source-code Breakage**: ğŸŸ¡ - **Extremely Minor**

## Short Summary
> - Improves mod loading times by up to 10%
> - Methods for custom hooks are no longer specified via reflection, and instead use the 'lambda expression' syntax
> - The only mods with runtime breakage are those with custom hooks that have `ref` or `out` parameters.

## Examples of adding custom hooks (for an imaginary method `OnThrow` in `MyInterface`):
```cs
// GlobalItem hook
GlobalHookList<GlobalItem> HookOnThrow = ItemLoader.AddModHook(GlobalHookList<GlobalItem>.Create(g => ((MyInterface)g).OnThrow));

// ModPlayer hook
HookList<ModPlayer> HookOnThrow = PlayerLoader.AddModHook(HookList<ModPlayer>.Create(p => ((MyInterface)p).OnThrow));
```

Ping <@133915372964282368> or <@273470797916405770> if you need help updating your mod or implementing custom hooks
-->

# æ”¹å–„ `HookList` å’Œ `GlobalHookList` çš„å¯ç”¨æ€§ä¸æ€§èƒ½
by **Chicken Bones**
**Pull Requests**ï¼š<https://github.com/tModLoader/tModLoader/pull/4088>ã€<https://github.com/tModLoader/tModLoader/pull/4089>  
**æ›´æ–°è‡³é¢„è§ˆç‰ˆ**ï¼šå·²å®Œæˆ  
**æ›´æ–°è‡³ç¨³å®šç‰ˆ**ï¼š2024-04-01 09:00  
**è¿è¡Œæ—¶ç ´åæ€§**ï¼šğŸŸ¡ - **å¾®**  
**ä»£ç ç ´åæ€§**ï¼šğŸŸ¡ - **æå¾®**

## ç®€è¦æ€»ç»“
- æœ€é«˜å‡å°‘10%æ¨¡ç»„åŠ è½½æ—¶é—´ã€‚
- è‡ªå®šä¹‰é’©å­çš„æ–¹æ³•ä¸å†ç”±åå°„ï¼Œè€Œæ˜¯ç”±â€œLambda è¡¨è¾¾å¼â€åˆ›å»ºã€‚
- åªå½±å“æœ‰å« `ref` æˆ– `out` å‚æ•°çš„é’©å­çš„æ¨¡ç»„è¿è¡Œã€‚

## æ·»åŠ é’©å­çš„ç¤ºä¾‹
å‡è®¾æœ‰æ¥å£ `MyInterface`ï¼Œå…¶ä¸­æœ‰æ–¹æ³• `OnThrow`ï¼›
```cs
// GlobalItem é’©å­
GlobalHookList<GlobalItem> HookOnThrow = ItemLoader.AddModHook(GlobalHookList<GlobalItem>.Create(g => ((MyInterface)g).OnThrow));

// ModPlayer é’©å­
HookList<ModPlayer> HookOnThrow = PlayerLoader.AddModHook(HookList<ModPlayer>.Create(p => ((MyInterface)p).OnThrow));
```

å¦‚éœ€ç›¸å…³å¸®åŠ©ï¼Œå¯å’¨è¯¢ Chicken Bones æˆ– Mirsarioã€‚

<!--
# æ”¹å–„ HookList å’Œ GlobalHookList çš„å¯ç”¨æ€§ä¸æ€§èƒ½
by Chicken Bones
Pull Requestsï¼šhttps://github.com/tModLoader/tModLoader/pull/4088ã€https://github.com/tModLoader/tModLoader/pull/4089
æ›´æ–°è‡³é¢„è§ˆç‰ˆï¼šå·²å®Œæˆ
æ›´æ–°è‡³ç¨³å®šç‰ˆï¼š2024-04-01 09:00
è¿è¡Œæ—¶ç ´åæ€§ï¼šğŸŸ¡ - å¾®
ä»£ç ç ´åæ€§ï¼šğŸŸ¡ - æå¾®

## ç®€è¦æ€»ç»“
- æœ€é«˜å‡å°‘10%æ¨¡ç»„åŠ è½½æ—¶é—´ã€‚
- è‡ªå®šä¹‰é’©å­çš„æ–¹æ³•ä¸å†ç”±åå°„ï¼Œè€Œæ˜¯ç”±â€œLambda è¡¨è¾¾å¼â€åˆ›å»ºã€‚
- åªå½±å“æœ‰å« ref æˆ– out å‚æ•°çš„é’©å­çš„æ¨¡ç»„è¿è¡Œã€‚

## æ·»åŠ é’©å­çš„ç¤ºä¾‹
å‡è®¾æœ‰æ¥å£ MyInterfaceï¼Œå…¶ä¸­æœ‰æ–¹æ³• OnThrowï¼›

// GlobalItem é’©å­
GlobalHookList<GlobalItem> HookOnThrow = ItemLoader.AddModHook(GlobalHookList<GlobalItem>.Create(g => ((MyInterface)g).OnThrow));

// ModPlayer é’©å­
HookList<ModPlayer> HookOnThrow = PlayerLoader.AddModHook(HookList<ModPlayer>.Create(p => ((MyInterface)p).OnThrow));

å¦‚éœ€ç›¸å…³å¸®åŠ©ï¼Œå¯å’¨è¯¢ Chicken Bones æˆ– Mirsarioã€‚
-->

---

<!--
# `Several Asset Loading Improvements and Corresponding Asset Wiki Guide`
by **Chicken Bones and jopojelly** has been merged.
**Pull Request:** <https://github.com/tModLoader/tModLoader/compare/3ed8e6eff98af2b7fea55b236a7849e409617ff8...58ed35b2ddedcc7f67a7be50a57223de2cd414b0>
**Arrives in Preview**: <t:1711052919:f> (Direct to Preview due to importance)
**Arrives in Stable**: <t:1711933200:f>
**Runtime Breakage**: ğŸŸ¢ - **None**
**Source-code Breakage**: ğŸŸ¢ - **None**, but you should update your code according to the guide. The `ShaderData` change will be a compile error in the subsequent month.

## Short Summary
> - We've noticed that many mods do not use `Assets<T>` as efficiently as they can. These changes and accompanying guides will help modders improve their mod's load times and performance.
> - A new [Assets wiki page](<https://github.com/tModLoader/tModLoader/wiki/Assets>) has been made to teach modders various guidelines on how to properly use the `Asset` class. 
> - [ExampleMod has been updated](<https://github.com/tModLoader/tModLoader/pull/4121>) to follow these new guidelines. It serves as a practical example of the guidelines taught in the Asset wiki page.
> - Log messages will warn about mods that spend a long time using `AssetRequestMode.ImmediateLoad` during mod loading.
> - `ShaderData` now has a constructor that takes a `Asset<Effect>`, allowing for more efficient Shader loading.

## Porting Notes
> - Please read the new [Assets wiki page](<https://github.com/tModLoader/tModLoader/wiki/Assets>) and apply the guidelines taught within. 
> - Replace `ShaderData` constructors with the new `Asset<Effect>` approach: 
> Old:
> ```new ArmorShaderData(new Ref<Effect>(Mod.Assets.Request<Effect>("Assets/Effects/ExampleEffect", AssetRequestMode.ImmediateLoad).Value), "ExampleDyePass")```
> New:
> ```new ArmorShaderData(Mod.Assets.Request<Effect>("Assets/Effects/ExampleEffect"), "ExampleDyePass")```
-->

# æ”¹è¿›ç´ æåŠ è½½ API åŠå…¶æŒ‡å—
by **Chicken Bones** å’Œ **jopojelly**  
**æäº¤**ï¼š<https://github.com/tModLoader/tModLoader/compare/3ed8e6e...58ed35b>  
**æ›´æ–°è‡³é¢„è§ˆç‰ˆ**ï¼š2024-03-22 04:28ï¼ˆå› å…¶é‡è¦æ€§ç›´æ¥è¿›å…¥é¢„è§ˆç‰ˆï¼‰  
**æ›´æ–°è‡³ç¨³å®šç‰ˆ**ï¼š2024-04-01 09:00  
**è¿è¡Œæ—¶ç ´åæ€§**ï¼šğŸŸ¢ - **æ— **  
**ä»£ç ç ´åæ€§**ï¼šğŸŸ¢ - **æ— **ï¼Œä½†ä½ åº”è¯¥æ ¹æ®æŒ‡å—ä¿®æ”¹ä»£ç ï¼›ä¸‹ä¸ªæœˆï¼Œ`ShaderData` çš„æ”¹åŠ¨å°†äº§ç”Ÿç¼–è¯‘å¼‚å¸¸ã€‚

## ç®€è¦æ€»ç»“
- æˆ‘ä»¬æ³¨æ„åˆ°è®¸å¤šæ¨¡ç»„æ²¡è®© `Assets<T>` è¾¾åˆ°åº”æœ‰çš„æ•ˆç‡ï¼›æ­¤æ¬¡æ›´æ–°ä¼šå¸®åŠ©æ¨¡ç»„åˆ¶ä½œè€…ä»¬æ”¹å–„æ€§èƒ½ï¼Œç¼©å‡åŠ è½½æ—¶é—´ã€‚
- æ–°å¢äº†[å…³äºå¦‚ä½•æ­£ç¡®ä½¿ç”¨ç±» `Asset` çš„ Wiki é¡µé¢](<https://github.com/tModLoader/tModLoader/wiki/Assets>)ã€‚
- ç›¸åº”çš„ï¼Œ[ç¤ºä¾‹æ¨¡ç»„ä¹Ÿæ ¹æ®æŒ‡å—æ›´æ–°äº†](<https://github.com/tModLoader/tModLoader/pull/4121>)ã€‚
- æ–°å¢äº†è­¦å‘Šé•¿æ—¶é—´ `AssetRequestMode.ImmediateLoad` çš„æ¨¡ç»„åŠ è½½æ—¥å¿—ã€‚
- æ–°å¢äº† `ShaderData` çš„ `Asset<Effect>` æ„é€ å‡½æ•°ï¼Œæé«˜ç€è‰²å™¨åŠ è½½æ•ˆç‡ã€‚

## æç¤º
- è¯·é˜…è¯» [`Asset` çš„ Wiki é¡µé¢](<https://github.com/tModLoader/tModLoader/wiki/Assets>)å¹¶éµå®ˆå…¶ä¸­çš„å‡†åˆ™ã€‚
- Replace `ShaderData` constructors with the new `Asset<Effect>` approach: 
- æ›´æ–°æ„é€  `ShaderData` çš„æ–¹æ³•ï¼š

    æ—§ï¼š
    ```new ExampleShaderData(new Ref<Effect>(Mod.Assets.Request<Effect>("Assets/Effects/ExampleEffect", AssetRequestMode.ImmediateLoad).Value), "ExampleDyePass")```
    æ–°ï¼š
    ```new ExampleShaderData(Mod.Assets.Request<Effect>("Assets/Effects/ExampleEffect"), "ExampleDyePass")```

<!--
# æ”¹è¿›ç´ æåŠ è½½ API åŠå…¶æŒ‡å—
by Chicken Bones å’Œ jopojelly
æäº¤ï¼šhttps://github.com/tModLoader/tModLoader/compare/3ed8e6e...58ed35b
æ›´æ–°è‡³é¢„è§ˆç‰ˆï¼š2024-03-22 04:28ï¼ˆå› å…¶é‡è¦æ€§ç›´æ¥è¿›å…¥é¢„è§ˆç‰ˆï¼‰
æ›´æ–°è‡³ç¨³å®šç‰ˆï¼š2024-04-01 09:00
è¿è¡Œæ—¶ç ´åæ€§ï¼šğŸŸ¢ - æ— 
ä»£ç ç ´åæ€§ï¼šğŸŸ¢ - æ— ï¼Œä½†ä½ åº”è¯¥æ ¹æ®æŒ‡å—ä¿®æ”¹ä»£ç ï¼›ä¸‹ä¸ªæœˆï¼ŒShaderData çš„æ”¹åŠ¨å°†äº§ç”Ÿç¼–è¯‘å¼‚å¸¸ã€‚

## ç®€è¦æ€»ç»“
- æˆ‘ä»¬æ³¨æ„åˆ°è®¸å¤šæ¨¡ç»„æ²¡è®© Assets<T> è¾¾åˆ°åº”æœ‰çš„æ•ˆç‡ï¼›æ­¤æ¬¡æ›´æ–°ä¼šå¸®åŠ©æ¨¡ç»„åˆ¶ä½œè€…ä»¬æ”¹å–„æ€§èƒ½ï¼Œç¼©å‡åŠ è½½æ—¶é—´ã€‚
- æ–°å¢äº†å…³äºå¦‚ä½•æ­£ç¡®ä½¿ç”¨ç±» Asset çš„ Wiki é¡µé¢ï¼ˆhttps://github.com/tModLoader/tModLoader/wiki/Assetsï¼‰ã€‚
- ç›¸åº”çš„ï¼Œç¤ºä¾‹æ¨¡ç»„ä¹Ÿæ ¹æ®æŒ‡å—æ›´æ–°äº†ï¼ˆhttps://github.com/tModLoader/tModLoader/pull/4121>ï¼‰ã€‚
- æ–°å¢äº†è­¦å‘Šé•¿æ—¶é—´ AssetRequestMode.ImmediateLoad çš„æ¨¡ç»„åŠ è½½æ—¥å¿—ã€‚
- æ–°å¢äº† ShaderData çš„ Asset<Effect> æ„é€ å‡½æ•°ï¼Œæé«˜ç€è‰²å™¨åŠ è½½æ•ˆç‡ã€‚

## æç¤º
- è¯·é˜…è¯» Asset çš„ Wiki é¡µé¢ï¼ˆhttps://github.com/tModLoader/tModLoader/wiki/Assetsï¼‰å¹¶éµå®ˆå…¶ä¸­çš„å‡†åˆ™ã€‚
- Replace ShaderData constructors with the new Asset<Effect> approach: 
- æ›´æ–°æ„é€  ShaderData çš„æ–¹æ³•ï¼š
æ—§ï¼š
new ExampleShaderData(new Ref<Effect>(Mod.Assets.Request<Effect>("Assets/Effects/ExampleEffect", AssetRequestMode.ImmediateLoad).Value), "ExampleDyePass")
æ–°ï¼š
new ExampleShaderData(Mod.Assets.Request<Effect>("Assets/Effects/ExampleEffect"), "ExampleDyePass")
-->
